# Учебный проект создания собственной БД на С++
***
## Авторы
#### Фёдор Горшков, Клинин Станислав, группа КНМО-101
***
## Архитектура
Данный проект - реляционная база данных, поддерживающая изменяемость входных данных.  
Файл header.txt содержит два основных блока: 
* SIZE OF TYPES - описание используемых типов данных, записи вида тип_данных:размер
* TABLES - описание названий файлов таблиц, названия столбцов и их типы данных
* Может содержать комментарии начинающиеся с //
#
> Также стоит отметить, что путь до папки с таблицами является константой, объявленной в main.cpp  и по умолчанию это папка tables/ 

Немало важно то, что сами таблицы не хранятся в памяти при работе БД. Вместо самих аттрибутов  
хранятся их хэши и ссылки (индекс, по факту, просто число) на запись в оригинальной таблице.  
Такая организация не только экономит память (ведь даже строки длиной 128 преобразуются в   
шестизначное число), но и позволяет существенно сократить работу с самими файлами. 
Прямое обращение к файлам происходит в двух случаях:
* Добавление новой записи в таблицу. Чтобы не нарушить индексацию в хэш-таблицах,  новая запись добавляется в конец файла, что также экономит время. После этого вычисляются хэши столбцов, которые должны быть захэшированы, и добавляются в соответствующие таблицы
* Изменение значений аттрибутов в конкретной записи. При этом также меняется и соответствующий хэш в хэш-таблице
#
>Поиск, соответственно, производится по хэш-таблицам. Это экономит время, т. к. используется бин. поиск вместо обычного полного перебора (хэши поддерживают упорядоченность при добавлении нового хэша, с помощью того же бин. поиска)
***
## Команды
### Общие понятия:
* Маска атрибутов - запись вида атрибут_1;атрибут_2;...;атрибут_N
* Знак %& вместо атрибута будет значит любой атрибут
* Ключевое слово ALL будет означать маску атрибутов состаяющую исключительно из %&, то есть задающую все записи
### Использование команд:
* SELECT [имя_таблицы] [маска_атрибутов] - выбирает подходящие под маску атрибутов записи из таблицы и запоминает их для дальнейших операций над ними. 
* EDIT [номер_записи] [маска_атрибутов] - заменяет атрибуты записи с данным номером на соответствующие (не равные %&) из маски
* DELETE [номер_записи] - помечает запись как удаленную, не удаляет физически
* ADD [имя_таблицы] [маска_атрибутов] - добавляет в таблицу с данным именем запись соответствующую маске, при том маска не может содержать %&
* EXAMS [id_группы] [название_предмета] - записывает в файл по пути из таблицы specialities экзаменационный лист по данному предмету для данной группы
* DELETE* - производит физическое удаление помеченных командой DELETE записей(так же вызывается каждые 5 минут и при выходе через EXIT)
* SELECTED - печатает выбранные записи
* UNSELECT - отменяет выбор записей
* EXIT - выход из программы